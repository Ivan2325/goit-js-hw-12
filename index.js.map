{"version":3,"file":"index.js","sources":["../src/js/paxabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46105341-e9731a626d926c92deaafdc0d';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15, \n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error('Error fetching images');\n  }\n}\n\n\n\n","import \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      (image) => `\n      <div class=\"container\">\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"subtitle\">\n            <b>Likes:</b> ${image.likes}\n          </p>\n          <p class=\"subtitle\">\n            <b>Views:</b> ${image.views}\n          </p>\n          <p class=\"subtitle\">\n            <b>Comments:</b> ${image.comments}\n          </p>\n          <p class=\"subtitle\">\n            <b>Downloads:</b> ${image.downloads}\n          </p>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup); // Додаємо нові елементи після існуючих\n}\n\n\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\n","\nimport { fetchImages } from './js/paxabay-api.js';\nimport { renderImages, clearGallery } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.getElementById('search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more'); \nlet page = 1;\nlet query = '';\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(event) {\n  event.preventDefault();\n  query = event.target.elements.searchQuery.value.trim();\n  \n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query',\n    });\n    return;\n  }\n\n  clearGallery();\n  page = 1;\n  loadMoreBtn.classList.add('hidden');  // Приховуємо кнопку перед новим пошуком\n  fetchAndRenderImages();\n}\n\nfunction fetchAndRenderImages() {\n  showLoader();  // Показуємо лоадер перед початком запиту\n  \n  fetchImages(query, page)\n    .then(data => {\n      hideLoader();  // Ховаємо лоадер після отримання результатів\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n\n      renderImages(data.hits);  // Рендеримо зображення\n\n      iziToast.success({\n        title: 'Success',\n        message: `Found ${data.totalHits} images`,\n      });\n      \n      // Якщо є ще результати для завантаження\n      if (data.hits.length === 15) {  // Перевірка на те, чи є ще результати\n        loadMoreBtn.classList.remove('hidden');  // Показуємо кнопку \"Load More\"\n      } else {\n        loadMoreBtn.classList.add('hidden');  // Ховаємо кнопку, якщо результатів більше немає\n      }\n\n      // Скрол на висоту двох карток\n      const cardHeight = document.querySelector('.gallery').firstElementChild.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n      });\n    })\n    .catch(error => {\n      hideLoader();  // Ховаємо лоадер у випадку помилки\n      iziToast.error({\n        title: 'Error',\n        message: error.message,\n      });\n    });\n}\n\nfunction onLoadMore() {\n  page += 1;\n  loadMoreBtn.classList.add('hidden');  // Ховаємо кнопку під час завантаження\n  fetchAndRenderImages();  // Завантажуємо наступну сторінку\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';  // Показуємо лоадер\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';  // Ховаємо лоадер\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","renderImages","images","gallery","markup","image","clearGallery","searchForm","loader","loadMoreBtn","onSearch","onLoadMore","event","iziToast","fetchAndRenderImages","showLoader","data","hideLoader","cardHeight","error"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GACe,IACjB,MAAe,CACd,MAAM,IAAI,MAAM,uBAAuB,CACxC,CACH,CCpBO,SAASE,EAAaC,EAAQ,CACnC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACEG,GAAU;AAAA;AAAA,mBAEEA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,4BAIhCA,EAAM,KAAK;AAAA;AAAA;AAAA,4BAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,+BAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,gCAGbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAK1C,EACA,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAIO,SAASE,GAAe,CAC7B,MAAMH,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,CChCA,MAAMI,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIV,EAAO,EACPD,EAAQ,GAEZS,EAAW,iBAAiB,SAAUG,CAAQ,EAC9CD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,SAASD,EAASE,EAAO,CAIvB,GAHAA,EAAM,eAAc,EACpBd,EAAQc,EAAM,OAAO,SAAS,YAAY,MAAM,OAE5C,CAACd,EAAO,CACVe,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,6BACf,CAAK,EACD,MACD,CAEDP,IACAP,EAAO,EACPU,EAAY,UAAU,IAAI,QAAQ,EAClCK,GACF,CAEA,SAASA,GAAuB,CAC9BC,IAEAlB,EAAYC,EAAOC,CAAI,EACpB,KAAKiB,GAAQ,CAGZ,GAFAC,IAEID,EAAK,KAAK,SAAW,EAAG,CAC1BH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0EACnB,CAAS,EACD,MACD,CAEDZ,EAAae,EAAK,IAAI,EAEtBH,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,SAASG,EAAK,SAAS,SACxC,CAAO,EAGGA,EAAK,KAAK,SAAW,GACvBP,EAAY,UAAU,OAAO,QAAQ,EAErCA,EAAY,UAAU,IAAI,QAAQ,EAIpC,MAAMS,EAAa,SAAS,cAAc,UAAU,EAAE,kBAAkB,sBAAuB,EAAC,OAChG,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CACP,CAAK,EACA,MAAMC,GAAS,CACdF,IACAJ,EAAS,MAAM,CACb,MAAO,QACP,QAASM,EAAM,OACvB,CAAO,CACP,CAAK,CACL,CAEA,SAASR,GAAa,CACpBZ,GAAQ,EACRU,EAAY,UAAU,IAAI,QAAQ,EAClCK,GACF,CAEA,SAASC,GAAa,CACpBP,EAAO,MAAM,QAAU,OACzB,CAEA,SAASS,GAAa,CACpBT,EAAO,MAAM,QAAU,MACzB"}